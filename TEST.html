<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAWAFED TRADING & ALTERNATIVE ENERGY</title>

    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Cairo:wght@400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="images/rawafed.ico">

    <style>
        /* Custom Styles */
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }

        /* Style for Arabic text */
        .lang-ar {
            font-family: 'Cairo', sans-serif;
        }

        /* Hide elements by default, to be shown by JS */
        [data-lang="ar"],
        [data-lang="en"] {
            display: none;
        }

        /* Preloader styles */
        #preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #ffffff;
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease;
        }

        .spinner {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            border: 9px solid;
            border-color: #dbdcef;
            border-right-color: #2f3fa4;
            animation: spinner-d3wgkg 1s infinite linear;
        }

        @keyframes spinner-d3wgkg {
            to {
                transform: rotate(1turn);
            }
        }

        /* Modal styles */
        .modal {
            transition: opacity 0.25s ease;
        }

        body.modal-active {
            overflow: hidden;
        }

        .modal-content {
            transition: transform 0.25s ease;
        }

        /* Active tab style */
        .tab-active {
            border-color: #f87a05 !important;
            color: #f87a05 !important;
        }
    </style>
</head>

<body class="bg-gray-50 text-gray-800">

    <!-- Preloader -->
    <div id="preloader">
        <div class="spinner"></div>
    </div>

    <!-- Header and Navigation Bar -->
    <header id="navbar" class="bg-white/80 backdrop-blur-md shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <img src="images/NEW LOGO RAWAFED.webp" alt="Rawafed Logo" class="h-14 w-auto">
                <div class="font-bold text-lg md:text-xl text-[#2f3fa4]">
                    <span data-lang="en">RAWAFED</span>
                    <span data-lang="ar" class="lang-ar">روافد</span>
                </div>
            </div>
            <div class="hidden md:flex items-center space-x-6 text-gray-700 font-medium">
                <a href="#home" class="hover:text-[#f87a05] transition-colors" data-lang="en">Home</a>
                <a href="#about" class="hover:text-[#f87a05] transition-colors" data-lang="en">About</a>
                <a href="#projects" class="hover:text-[#f87a05] transition-colors" data-lang="en">Projects</a>
                <a href="#products" class="hover:text-[#f87a05] transition-colors" data-lang="en">Products</a>
                <a href="#contact" class="hover:text-[#f87a05] transition-colors" data-lang="en">Contact</a>

                <a href="#home" class="hover:text-[#f87a05] transition-colors lang-ar" data-lang="ar">الرئيسية</a>
                <a href="#about" class="hover:text-[#f87a05] transition-colors lang-ar" data-lang="ar">عن الشركة</a>
                <a href="#projects" class="hover:text-[#f87a05] transition-colors lang-ar" data-lang="ar">مشاريعنا</a>
                <a href="#products" class="hover:text-[#f87a05] transition-colors lang-ar" data-lang="ar">منتجاتنا</a>
                <a href="#contact" class="hover:text-[#f87a05] transition-colors lang-ar" data-lang="ar">تواصل معنا</a>
            </div>
            <div class="flex items-center">
                <button id="lang-switcher"
                    class="bg-[#2f3fa4] text-white px-4 py-2 rounded-md hover:bg-[#f87a05] transition-colors font-semibold">
                    <span class="lang-ar">English</span>
                    <span>العربية</span>
                </button>
                <button id="mobile-menu-button" class="md:hidden ml-4 text-gray-800 focus:outline-none">
                    <i class="fas fa-bars text-2xl"></i>
                </button>
            </div>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4 bg-white shadow-lg">
            <!-- Mobile links will be populated by JS -->
        </div>
    </header>

    <main>
        <!-- Hero Section -->
        <section id="home" class="relative h-[70vh] bg-cover bg-center"
            style="background-image: url('data1/images/img_7691.jpg');">
            <div class="absolute inset-0 bg-black/50"></div>
            <div
                class="relative container mx-auto px-6 h-full flex flex-col justify-center items-center text-center text-white">
                <h1 class="text-3xl md:text-5xl font-bold leading-tight" data-lang="en">RAWAFED TRADING & ALTERNATIVE
                    ENERGY</h1>
                <h1 class="text-3xl md:text-5xl font-bold leading-tight lang-ar" data-lang="ar">روافد للتجارة والطاقة
                    البديلة م.م.خ</h1>
                <p class="mt-4 text-lg md:text-2xl" data-lang="en">Together For Sustainable Power</p>
                <p class="mt-4 text-lg md:text-2xl lang-ar" data-lang="ar">معاً من أجل طاقة مستدامة</p>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="py-20 bg-white">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center mb-12" data-lang="en">About Our Company</h2>
                <h2 class="text-3xl font-bold text-center mb-12 lang-ar" data-lang="ar">عن شركتنا</h2>
                <div class="flex flex-col md:flex-row items-center gap-12">
                    <div class="md:w-1/2">
                        <img src="images/RAWAFED_AL_OULA.webp" alt="About Rawafed" class="rounded-lg shadow-xl w-full">
                    </div>
                    <div class="md:w-1/2">
                        <p class="text-gray-600 leading-relaxed" data-lang="en"></p>
                        <p class="text-gray-600 leading-relaxed text-right lang-ar" data-lang="ar"></p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Projects Section -->
        <section id="projects" class="py-20">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center mb-12" data-lang="en">Our Projects</h2>
                <h2 class="text-3xl font-bold text-center mb-12 lang-ar" data-lang="ar">مشاريعنا</h2>
                <div id="projects-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Project cards will be injected here by JavaScript -->
                </div>
            </div>
        </section>

        <!-- Products Section -->
        <section id="products" class="py-20 bg-white">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center mb-4" data-lang="en">Our Products</h2>
                <h2 class="text-3xl font-bold text-center mb-4 lang-ar" data-lang="ar">منتجاتنا</h2>
                <p class="text-center text-gray-600 mb-12" data-lang="en">Exclusive agents for Motoma products in
                    Sweida.</p>
                <p class="text-center text-gray-600 mb-12 lang-ar" data-lang="ar">وكلاء شركة موتوما الحصريون في
                    السويداء.</p>

                <div class="mb-8 flex justify-center border-b border-gray-200">
                    <button data-tab="panels"
                        class="product-tab tab-active px-6 py-3 font-medium text-lg text-gray-500 border-b-2"
                        data-lang="en">Panels</button>
                    <button data-tab="inverters"
                        class="product-tab px-6 py-3 font-medium text-lg text-gray-500 hover:text-[#f87a05]"
                        data-lang="en">Inverters</button>
                    <button data-tab="batteries"
                        class="product-tab px-6 py-3 font-medium text-lg text-gray-500 hover:text-[#f87a05]"
                        data-lang="en">Batteries</button>

                    <button data-tab="panels"
                        class="product-tab tab-active px-6 py-3 font-medium text-lg text-gray-500 border-b-2 lang-ar"
                        data-lang="ar">الألواح</button>
                    <button data-tab="inverters"
                        class="product-tab px-6 py-3 font-medium text-lg text-gray-500 hover:text-[#f87a05] lang-ar"
                        data-lang="ar">الإنفيرترات</button>
                    <button data-tab="batteries"
                        class="product-tab px-6 py-3 font-medium text-lg text-gray-500 hover:text-[#f87a05] lang-ar"
                        data-lang="ar">البطاريات</button>
                </div>

                <div id="panels-content" class="product-content grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                </div>
                <div id="inverters-content"
                    class="product-content hidden grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                </div>
                <div id="batteries-content"
                    class="product-content hidden grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8"></div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-20 bg-gray-800 text-white">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center mb-12" data-lang="en">Contact Us</h2>
                <h2 class="text-3xl font-bold text-center mb-12 lang-ar" data-lang="ar">تواصل معنا</h2>
                <div class="flex flex-col md:flex-row gap-12">
                    <div class="md:w-1/2">
                        <div class="space-y-4">
                            <div class="flex items-center gap-4">
                                <i class="fas fa-map-marker-alt text-[#f87a05] text-xl w-6 text-center"></i>
                                <span data-lang="en">Syria - Sweida - Al Raha</span>
                                <span class="lang-ar" data-lang="ar">سوريا - السويداء - الرحا</span>
                            </div>
                            <div class="flex items-center gap-4">
                                <i class="fas fa-envelope text-[#f87a05] text-xl w-6 text-center"></i>
                                <a href="mailto:info@rawafed-sweida.com"
                                    class="hover:text-[#f87a05]">info@rawafed-sweida.com</a>
                            </div>
                            <div class="flex items-center gap-4">
                                <i class="fas fa-phone text-[#f87a05] text-xl w-6 text-center"></i>
                                <a href="tel:00963982470204" class="hover:text-[#f87a05]">00963-982470204</a>
                            </div>
                            <div class="flex items-center gap-4">
                                <i class="fas fa-tty text-[#f87a05] text-xl w-6 text-center"></i>
                                <span class="hover:text-[#f87a05]">016-395544</span>
                            </div>
                        </div>
                        <div class="mt-8 flex space-x-6">
                            <a href="https://www.youtube.com/@rawafedco-trading-alternat80" target="_blank"
                                class="text-2xl hover:text-[#f87a05] transition-colors"><i
                                    class="fab fa-youtube"></i></a>
                            <a href="https://www.facebook.com/Marwanaburas59?mibextid=ZbWKwL" target="_blank"
                                class="text-2xl hover:text-[#f87a05] transition-colors"><i
                                    class="fab fa-facebook"></i></a>
                            <a href="https://api.whatsapp.com/send?phone=963944911892" target="_blank"
                                class="text-2xl hover:text-[#f87a05] transition-colors"><i
                                    class="fab fa-whatsapp"></i></a>
                        </div>
                    </div>
                    <div class="md:w-1/2">
                        <iframe
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3345.101719293427!2d36.63469107471958!3d32.92210177755866!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x1539174304858b79%3A0x6b9075a31b0df841!2z2YXYt9i52YUg2YPYp9mFINmE2YTZhdmG2KfYqSDYp9mE2LTYsdmD2Kkg2KfZhNi32KjZitmC2YrYqQ!5e0!3m2!1sen!2s!4v1717876899736!5m2!1sen!2s"
                            width="100%" height="350" style="border:0;" allowfullscreen="" loading="lazy"
                            referrerpolicy="no-referrer-when-downgrade" class="rounded-lg shadow-lg"></iframe>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-gray-400 py-8">
        <div class="container mx-auto px-6 text-center">
            <p data-lang="en">Administrative Manager: Marwan Fadel Abu Ras</p>
            <p class="lang-ar" data-lang="ar">المدير الإداري: مروان فضل أبو راس</p>
            <p class="mt-2 text-sm">© <span id="year"></span> RAWAFED. All Rights Reserved.</p>
            <p class="mt-1 text-xs" data-lang="en">Designed by Eng. Qusai Hamael</p>
            <p class="mt-1 text-xs lang-ar" data-lang="ar">تصميم: م. قصي حمائل</p>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <button id="to-top-button" title="Go To Top"
        class="hidden fixed bottom-8 right-8 z-50 p-3 rounded-full bg-[#2f3fa4] text-white shadow-lg hover:bg-[#f87a05] focus:outline-none transition-all duration-300">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- Project Modal -->
    <div id="project-modal"
        class="modal fixed inset-0 bg-black bg-opacity-75 z-50 hidden items-center justify-center p-4 opacity-0">
        <div
            class="modal-content bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] transform scale-95 flex flex-col">
            <div class="flex justify-between items-center p-4 border-b">
                <h3 id="modal-title" class="text-2xl font-bold"></h3>
                <button id="modal-close" class="text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
            </div>
            <div class="p-6 overflow-y-auto">
                <div id="modal-video-container" class="mb-4 hidden"></div>
                <div id="modal-gallery" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                </div>
            </div>
        </div>
    </div>


    <script>
        // --- DATA STORE ---
        const textContent = {
            en: {
                about: `(Rawafed Company for Trade and Alternative Energy) was established on 7/14/2019 by Resolution No. 2058 in the town of Al-Raha, near the city of As-Sweida, southern Syria, according to law No.32 to invest in renewable energies, which allowed supplying the Syrian electricity network and enabling it to support and continue the work of industrial, agricultural and residential facilities by establishing the necessary photovoltaic stations. Rawafed has obtained the exclusive agency for Motoma's products in sweida, which include high-efficiency panels, inverters and variety batteries.`,
            },
            ar: {
                about: `تأسست (شركة روافد للتجارة والطاقة البديلة م.م.خ) في 14/7/2019 بالقرار رقم 2058 في بلدة الرحا جوار مدينة السويداء جنوب سورية وفق القانون رقم 32 للإستثمار في الطاقات المتجددة الذي سمح برفد الشبكة السورية للكهرباء وتمكينها دعم وإستمرار عمل المنشآت الصناعية والزراعية والسكنية بإقامة المحطات الكهروضوئية اللازمة. وقد حظيت شركة روافد بالوكالة الحصرية لمنتجات شركة (MOTOMA) موتوما العالمية في السويداء والتي تشمل الألواح عالية الكفاءة والإنفيرترات والبطاريات المتنوعة. <br><br><b>نحن: نَــدرُسْ.. نُــرَخِّصْ.. نُنَفِّذْ</b>`,
            }
        };

        const projectsData = [
            {
                id: 'rawafed-al-oula',
                name: { en: 'RAWAFED AL OULA STATION', ar: 'محطة روافد الأولى' },
                img: 'data1/images/img_7691.jpg',
                details: {
                    en: '100kw.h photovoltaic station owned by Rawafed Company in Sweida - Al-Raha - Masad Road.',
                    ar: 'محطة كهروضوئية 100kw.h. تملكها شركة روافد في السويداء - الرحا - طريق مصاد.'
                },
                video: 'https://www.youtube.com/embed/wtvYbuHSb3s?rel=0',
                gallery: ['images/rawafed/1.webp', 'images/rawafed/2.webp', 'images/rawafed/3.webp', 'images/rawafed/4.webp', 'images/rawafed/5.webp', 'images/rawafed/6.webp', 'images/rawafed/7.webp', 'images/rawafed/8.webp', 'images/rawafed/9.webp', 'images/rawafed/11.webp', 'images/rawafed/12.webp', 'images/rawafed/13.webp', 'images/rawafed/14.webp', 'images/rawafed/16.webp', 'images/rawafed/17.webp', 'images/rawafed/18.webp', 'images/rawafed/20.webp', 'images/rawafed/21.webp', 'images/rawafed/22.webp', 'images/rawafed/23.webp', 'images/rawafed/24.webp', 'images/rawafed/25.webp', 'images/rawafed/26.webp', 'images/rawafed/27.webp', 'images/rawafed/A.webp', 'images/rawafed/B.webp', 'images/rawafed/C.webp', 'images/rawafed/D.webp', 'images/rawafed/E.webp', 'images/rawafed/F.webp']
            },
            {
                id: 'al-ayham',
                name: { en: 'AL AYHAM STATION', ar: 'محطة الأيهم' },
                img: 'data1/images/41.png',
                details: {
                    en: '100kw.h photovoltaic station owned by Yahya Al-Andari and his sons in Sweida - Baka Triangle.',
                    ar: 'محطة كهروضوئية 100kw.h. يملكها يحيى العنداري وأولاده في السويداء-مثلث بكا.'
                },
                video: 'https://www.youtube.com/embed/W51fLY2Fpr4?rel=0',
                gallery: ['images/AL AYHAM/1.webp', 'images/AL AYHAM/2.webp', 'images/AL AYHAM/3.webp', 'images/AL AYHAM/4.webp', 'images/AL AYHAM/5.webp', 'images/AL AYHAM/6.webp', 'images/AL AYHAM/7.webp', 'images/AL AYHAM/8.webp', 'images/AL AYHAM/9.webp', 'images/AL AYHAM/10.webp', 'images/AL AYHAM/11.webp', 'images/AL AYHAM/12.webp', 'images/AL AYHAM/13.webp', 'images/AL AYHAM/14.webp', 'images/AL AYHAM/15.webp', 'images/AL AYHAM/16.webp', 'images/AL AYHAM/17.webp', 'images/AL AYHAM/18.webp', 'images/AL AYHAM/19.webp', 'images/AL AYHAM/20.webp', 'images/AL AYHAM/21.webp', 'images/AL AYHAM/22.webp', 'images/AL AYHAM/23.webp', 'images/AL AYHAM/24.webp', 'images/AL AYHAM/25.webp', 'images/AL AYHAM/26.webp', 'images/AL AYHAM/27.webp', 'images/AL AYHAM/28.webp', 'images/AL AYHAM/29.webp', 'images/AL AYHAM/30.webp', 'images/AL AYHAM/31.webp', 'images/AL AYHAM/32.webp', 'images/AL AYHAM/33.webp', 'images/AL AYHAM/34.webp', 'images/AL AYHAM/35.webp', 'images/AL AYHAM/36.webp', 'images/AL AYHAM/37.webp', 'images/AL AYHAM/38.webp', 'images/AL AYHAM/39.webp', 'images/AL AYHAM/40.webp', 'images/AL AYHAM/41.webp', 'images/AL AYHAM/42.webp', 'images/AL AYHAM/43.webp', 'images/AL AYHAM/44.webp', 'images/AL AYHAM/45.webp', 'images/AL AYHAM/46.webp']
            },
            {
                id: 'khalkhala',
                name: { en: 'KHALKHALA STATION', ar: 'محطة خلخلة' },
                img: 'data1/images/img_4324.jpg',
                details: {
                    en: '100kw.h photovoltaic station owned by Basil Hilal in Sweida - Khalkhala.',
                    ar: 'محطة كهروضوئية 100kw.h. يملكها باسل هلال في السويداء - خلخلة.'
                },
                video: '',
                gallery: ['images/KHALKHALA/1.JPG', 'images/KHALKHALA/2.PNG', 'images/KHALKHALA/3.PNG', 'images/KHALKHALA/4.PNG', 'images/KHALKHALA/5.JPG', 'images/KHALKHALA/6.JPG', 'images/KHALKHALA/7.JPG', 'images/KHALKHALA/8.JPG', 'images/KHALKHALA/9.JPG', 'images/KHALKHALA/11.JPG', 'images/KHALKHALA/12.JPG']
            },
            {
                id: 'off-grid',
                name: { en: 'OFF GRID SYSTEMS', ar: 'أنظمة خارج الشبكة' },
                img: 'data1/images/img_e8968.jpg',
                details: {
                    en: 'Customized off-grid solutions for residential and commercial needs.',
                    ar: 'حلول مخصصة خارج الشبكة للاحتياجات السكنية والتجارية.'
                },
                video: '',
                gallery: []
            }
        ];

        const productsData = {
            panels: [
                { name: 'SO-SPN-MC182-525-545', img: 'pdfs/SO-SPN-MC182-525-545.webp', pdf: 'pdfs/SO-SPN-MC182-525-545.pdf' },
                { name: 'DSE-SO-SPN-MC156-405', img: 'pdfs/SO-SPN-MC166-435-455.webp', pdf: 'pdfs/DSE-SO-SPN-MC156-405.pdf' },
            ],
            inverters: [
                { name: 'VM 1.5KVA', img: 'pdfs/VM 3KVA value.webp', pdf: 'pdfs/MOTOMA-Axpert VM 1.5KVA.pdf' },
                { name: 'VM 3KVA value', img: 'pdfs/VM 3KVA value.webp', pdf: 'pdfs/VM 3KVA value.pdf' },
                { name: 'VM III TWIN 4 & 6 KW', img: 'pdfs/VM III TWIN 4KW.webp', pdf: 'pdfs/VM III TWIN 4-6KW.pdf' },
                { name: 'VM IV TWIN 4 & 6 KW', img: 'pdfs/VM IV TWIN 4KW.webp', pdf: 'pdfs/VM IV TWIN 4-6 KW.pdf' },
                { name: 'MAX TWIN 8KW', img: 'pdfs/MAX TWIN 8KW.webp', pdf: 'pdfs/MAX TWIN 8KW.pdf' },
                { name: 'MAX II TWIN 8KW', img: 'pdfs/MAX II TWIN 8KW.webp', pdf: 'pdfs/MAX II TWIN 8KW.pdf' },
                { name: 'MAX II TWIN 11KW', img: 'pdfs/MAX II TWIN 8KW.webp', pdf: 'pdfs/MAX II TWIN 11KW.pdf' },
            ],
            batteries: [
                { name: 'M62PW - M68PW', img: 'pdfs/M62PW -M68PW.webp', pdf: 'pdfs/M62PW -M68PW.pdf' },
                { name: 'M82PW - M88PW', img: 'pdfs/M82PW _M88PW.webp', pdf: 'pdfs/M82PW -M88PW.pdf' },
                { name: 'GEL BATTERIES', img: 'pdfs/12.8V 200Ah.webp', pdf: 'pdfs/Motoma Gel Battery.pdf' },
            ]
        };

        // --- SCRIPT LOGIC ---
        document.addEventListener('DOMContentLoaded', () => {

            const preloader = document.getElementById('preloader');
            window.addEventListener('load', () => {
                preloader.style.opacity = '0';
                setTimeout(() => preloader.style.display = 'none', 500);
            });
            document.getElementById('year').textContent = new Date().getFullYear();

            const langSwitcher = document.getElementById('lang-switcher');
            const htmlEl = document.documentElement;
            let currentLang = 'en';

            const updateLanguage = (lang) => {
                currentLang = lang;
                htmlEl.lang = lang;
                htmlEl.dir = lang === 'ar' ? 'rtl' : 'ltr';

                document.querySelectorAll('[data-lang]').forEach(el => {
                    el.style.display = el.dataset.lang === lang ? 'block' : 'none';
                });

                const buttonTextEn = langSwitcher.querySelector('span:not(.lang-ar)');
                const buttonTextAr = langSwitcher.querySelector('span.lang-ar');
                if (lang === 'ar') {
                    buttonTextEn.style.display = 'block';
                    buttonTextAr.style.display = 'none';
                } else {
                    buttonTextEn.style.display = 'none';
                    buttonTextAr.style.display = 'block';
                }

                document.querySelector('p[data-lang="en"].leading-relaxed').innerHTML = textContent.en.about;
                document.querySelector('p[data-lang="ar"].leading-relaxed').innerHTML = textContent.ar.about;

                renderProjects();
                renderProducts();

                const activeTab = document.querySelector('.product-tab.tab-active')?.dataset.tab || 'panels';
                document.querySelectorAll('.product-tab').forEach(t => t.classList.remove('tab-active'));
                document.querySelectorAll(`.product-tab[data-tab="${activeTab}"]`).forEach(t => t.classList.add('tab-active'));
            };

            langSwitcher.addEventListener('click', () => {
                const newLang = currentLang === 'en' ? 'ar' : 'en';
                updateLanguage(newLang);
            });

            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const navLinks = document.querySelector('.hidden.md\\:flex');
            mobileMenu.innerHTML = navLinks.innerHTML;
            mobileMenu.querySelectorAll('a').forEach(link => {
                link.classList.add('block', 'py-2');
                link.addEventListener('click', () => mobileMenu.classList.add('hidden'));
            });
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });

            const projectsGrid = document.getElementById('projects-grid');
            const renderProjects = () => {
                projectsGrid.innerHTML = '';
                projectsData.forEach(project => {
                    const projectCard = `
                        <div class="bg-white rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-2 transition-transform duration-300 cursor-pointer project-card" data-project-id="${project.id}">
                            <img src="${project.img}" alt="${project.name[currentLang]}" class="w-full h-56 object-cover">
                            <div class="p-6">
                                <h3 class="text-xl font-bold mb-2">${project.name[currentLang]}</h3>
                                <p class="text-gray-600 text-sm">${project.details[currentLang]}</p>
                            </div>
                        </div>
                    `;
                    projectsGrid.innerHTML += projectCard;
                });
                addProjectCardListeners();
            };

            const modal = document.getElementById('project-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalGallery = document.getElementById('modal-gallery');
            const modalVideoContainer = document.getElementById('modal-video-container');
            const modalClose = document.getElementById('modal-close');

            const openModal = (projectId) => {
                const project = projectsData.find(p => p.id === projectId);
                if (!project) return;
                modalTitle.textContent = project.name[currentLang];

                if (project.video) {
                    modalVideoContainer.innerHTML = `<iframe class="w-full aspect-video rounded-md" src="${project.video}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
                    modalVideoContainer.classList.remove('hidden');
                } else {
                    modalVideoContainer.classList.add('hidden');
                    modalVideoContainer.innerHTML = '';
                }

                modalGallery.innerHTML = '';
                project.gallery.forEach(imgSrc => {
                    modalGallery.innerHTML += `<a href="${imgSrc}" target="_blank" rel="noopener noreferrer"><img src="${imgSrc}" class="w-full h-full object-cover rounded-md shadow-md hover:opacity-80 transition-opacity"></a>`;
                });

                modal.classList.remove('hidden');
                document.body.classList.add('modal-active');
                setTimeout(() => {
                    modal.classList.add('opacity-100');
                    modal.querySelector('.modal-content').classList.remove('scale-95');
                }, 10);
            };

            const closeModal = () => {
                modal.classList.remove('opacity-100');
                modal.querySelector('.modal-content').classList.add('scale-95');
                setTimeout(() => {
                    modal.classList.add('hidden');
                    document.body.classList.remove('modal-active');
                    modalVideoContainer.innerHTML = '';
                }, 250);
            };

            modalClose.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });
            document.addEventListener('keydown', (e) => { if (e.key === "Escape" && !modal.classList.contains('hidden')) closeModal(); });

            function addProjectCardListeners() {
                document.querySelectorAll('.project-card').forEach(card => {
                    card.addEventListener('click', () => openModal(card.dataset.projectId));
                });
            }

            const productTabs = document.querySelectorAll('.product-tab');
            const productContents = document.querySelectorAll('.product-content');

            const createProductCard = (product) => `
                <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 text-center transform hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
                    <img src="${product.img}" alt="${product.name}" class="w-full h-48 object-contain mb-4">
                    <h4 class="font-semibold h-12 flex items-center justify-center">${product.name}</h4>
                    <a href="${product.pdf}" target="_blank" rel="noopener noreferrer" class="mt-4 inline-block bg-[#2f3fa4] text-white px-5 py-2 rounded-md text-sm font-medium hover:bg-[#f87a05] transition-colors">
                        <span data-lang="en">Data Sheet</span>
                        <span data-lang="ar" class="lang-ar">ورقة البيانات</span>
                        <i class="fas fa-download ml-2"></i>
                    </a>
                </div>
            `;

            const renderProducts = () => {
                Object.keys(productsData).forEach(category => {
                    const container = document.getElementById(`${category}-content`);
                    if (container) {
                        container.innerHTML = '';
                        productsData[category].forEach(product => {
                            container.innerHTML += createProductCard(product);
                        });
                    }
                });
                document.querySelectorAll('[data-lang]').forEach(el => {
                    el.style.display = el.dataset.lang === currentLang ? 'block' : 'none';
                });
            };

            productTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabName = tab.dataset.tab;
                    productTabs.forEach(t => t.classList.remove('tab-active'));
                    document.querySelectorAll(`.product-tab[data-tab="${tabName}"]`).forEach(specificTab => specificTab.classList.add('tab-active'));

                    productContents.forEach(content => content.classList.add('hidden'));
                    const activeContent = document.getElementById(`${tabName}-content`);
                    if (activeContent) activeContent.classList.remove('hidden');
                });
            });

            const toTopButton = document.getElementById('to-top-button');
            window.addEventListener('scroll', () => {
                if (window.scrollY > 300) toTopButton.classList.remove('hidden');
                else toTopButton.classList.add('hidden');
            });
            toTopButton.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });

            updateLanguage('en');
        });
    </script>
</body>

</html>